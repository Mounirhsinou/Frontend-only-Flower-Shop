<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Complete your flower order securely">
    <title>Checkout - Petals & Blooms</title>

    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒ¹</text></svg>">
    <link rel="stylesheet" href="css/style.css">

    <style>
        .checkout-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: var(--spacing-2xl);
            align-items: start;
        }

        .checkout-section {
            background: var(--color-surface);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-lg);
            border: 1px solid var(--color-border);
        }

        .checkout-section h3 {
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid var(--color-border);
        }

        .checkout-item {
            display: grid;
            grid-template-columns: 60px 1fr auto auto;
            gap: var(--spacing-md);
            align-items: center;
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .checkout-item:last-child {
            border-bottom: none;
        }

        .checkout-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: var(--radius-md);
        }

        .checkout-item-details h4 {
            font-size: var(--font-size-base);
            margin-bottom: 4px;
        }

        .checkout-item-details p {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin: 0;
        }

        .checkout-item-quantity {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }

        .checkout-item-price {
            font-weight: 600;
            color: var(--color-primary);
        }

        .checkout-summary {
            padding: var(--spacing-lg);
            background: var(--color-accent);
            border-radius: var(--radius-md);
            margin-top: var(--spacing-md);
        }

        .checkout-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-sm);
            font-size: var(--font-size-base);
        }

        .checkout-total {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary);
            padding-top: var(--spacing-md);
            border-top: 2px solid var(--color-border);
            margin-top: var(--spacing-md);
        }

        .order-summary-sidebar {
            position: sticky;
            top: 90px;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-sm);
        }

        .payment-method {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .payment-method:hover {
            border-color: var(--color-primary);
            background: var(--color-accent);
        }

        .payment-method input[type="radio"]:checked+label {
            border-color: var(--color-primary);
            background: var(--color-accent);
        }

        @media (max-width: 968px) {
            .checkout-layout {
                grid-template-columns: 1fr;
            }

            .order-summary-sidebar {
                position: relative;
                top: 0;
                order: -1;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <span class="logo-icon">ðŸŒ¹</span>
                <span>Petals & Blooms</span>
            </a>

            <nav class="nav" role="navigation" aria-label="Main navigation">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">Home</a></li>
                    <li><a href="shop.html" class="nav-link">Shop</a></li>
                    <li><a href="about.html" class="nav-link">About</a></li>
                    <li><a href="contact.html" class="nav-link">Contact</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <button id="theme-toggle" class="icon-btn" aria-label="Toggle dark mode">ðŸŒ™</button>
                <button id="cart-toggle" class="icon-btn" aria-label="View shopping cart">
                    ðŸ›’
                    <span class="badge cart-badge">0</span>
                </button>
                <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Toggle mobile menu">â˜°</button>
            </div>
        </div>
    </header>

    <!-- Checkout Header -->
    <section
        style="background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-background) 100%); padding: var(--spacing-xl) 0;">
        <div class="container">
            <h1 style="font-size: var(--font-size-4xl); text-align: center;">Secure Checkout</h1>
        </div>
    </section>

    <!-- Checkout Content -->
    <section style="padding: var(--spacing-3xl) 0;">
        <div class="container">
            <div class="checkout-layout">
                <!-- Checkout Form -->
                <div>
                    <form id="checkout-form">
                        <!-- Customer Information -->
                        <div class="checkout-section">
                            <h3>1. Contact Information</h3>
                            <div class="form-group">
                                <label for="customer-name" class="form-label">Full Name *</label>
                                <input type="text" id="customer-name" name="name" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="customer-email" class="form-label">Email Address *</label>
                                <input type="email" id="customer-email" name="email" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="customer-phone" class="form-label">Phone Number *</label>
                                <input type="tel" id="customer-phone" name="phone" class="form-input" required>
                            </div>
                        </div>

                        <!-- Delivery Address -->
                        <div class="checkout-section">
                            <h3>2. Delivery Address</h3>
                            <div class="form-group">
                                <label for="address" class="form-label">Street Address *</label>
                                <input type="text" id="address" name="address" class="form-input" required>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
                                <div class="form-group">
                                    <label for="city" class="form-label">City *</label>
                                    <input type="text" id="city" name="city" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="state" class="form-label">State *</label>
                                    <input type="text" id="state" name="state" class="form-input" required>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
                                <div class="form-group">
                                    <label for="zip" class="form-label">ZIP Code *</label>
                                    <input type="text" id="zip" name="zip" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="country" class="form-label">Country *</label>
                                    <input type="text" id="country" name="country" class="form-input"
                                        value="United States" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="delivery-notes" class="form-label">Delivery Instructions (optional)</label>
                                <textarea id="delivery-notes" name="deliveryNotes" class="form-textarea" rows="3"
                                    placeholder="E.g., gate code, best time to deliver..."></textarea>
                            </div>
                        </div>

                        <!-- Delivery Method -->
                        <div class="checkout-section">
                            <h3>3. Delivery Method</h3>
                            <div style="display: grid; gap: var(--spacing-sm);">
                                <label class="payment-method">
                                    <input type="radio" name="deliveryMethod" value="standard" checked>
                                    <div style="flex: 1;">
                                        <strong>Standard Delivery (2-3 days)</strong>
                                        <p
                                            style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin: 0;">
                                            $8.00 (FREE on orders over $50)</p>
                                    </div>
                                </label>
                                <label class="payment-method">
                                    <input type="radio" name="deliveryMethod" value="express">
                                    <div style="flex: 1;">
                                        <strong>Express Delivery (1-2 days)</strong>
                                        <p
                                            style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin: 0;">
                                            $15.00</p>
                                    </div>
                                </label>
                                <label class="payment-method">
                                    <input type="radio" name="deliveryMethod" value="sameday">
                                    <div style="flex: 1;">
                                        <strong>Same-Day Delivery</strong>
                                        <p
                                            style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin: 0;">
                                            $25.00 (select cities only)</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Payment Method -->
                        <div class="checkout-section">
                            <h3>4. Payment Method</h3>
                            <p
                                style="color: var(--color-text-secondary); margin-bottom: var(--spacing-md); font-size: var(--font-size-sm);">
                                Payment integration ready. Select your preferred method below.
                            </p>
                            <div class="payment-methods">
                                <label class="payment-method">
                                    <input type="radio" name="paymentMethod" value="card" checked>
                                    <span>ðŸ’³ Card</span>
                                </label>
                                <label class="payment-method">
                                    <input type="radio" name="paymentMethod" value="paypal">
                                    <span>ðŸ’° PayPal</span>
                                </label>
                            </div>

                            <div
                                style="margin-top: var(--spacing-lg); padding: var(--spacing-md); background: var(--color-accent); border-radius: var(--radius-md); font-size: var(--font-size-sm);">
                                <strong>ðŸ’¡ Integration Note:</strong> Payment processing is ready to be integrated with
                                Stripe or PayPal. See README.md for setup instructions.
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">
                            Place Order
                        </button>
                    </form>
                </div>

                <!-- Order Summary -->
                <div class="order-summary-sidebar">
                    <div class="checkout-section">
                        <h3>Order Summary</h3>
                        <div id="checkout-items">
                            <!-- Items will be loaded dynamically -->
                        </div>
                    </div>

                    <div class="checkout-section"
                        style="background: var(--color-primary-light); border: 2px solid var(--color-primary);">
                        <h4 style="margin: 0;">ðŸ”’ Secure Checkout</h4>
                        <p
                            style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-top: var(--spacing-xs);">
                            Your information is encrypted and secure
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Petals & Blooms</h3>
                    <p style="color: var(--color-text-secondary);">Delivering joy, one bouquet at a time.</p>
                </div>

                <div class="footer-section">
                    <h3>Customer Service</h3>
                    <ul class="footer-links">
                        <li><a href="shipping.html">Shipping & Delivery</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li>ðŸ“§ hello@petalsblooms.com</li>
                        <li>ðŸ“ž +1 (555) 123-4567</li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 Petals & Blooms. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div id="cart-overlay" class="modal-overlay">
        <aside id="cart-sidebar" class="modal" role="dialog" aria-labelledby="cart-title" aria-modal="true"
            style="max-width: 450px; margin-left: auto;">
            <div class="modal-header">
                <h2 id="cart-title">Shopping Cart</h2>
                <button id="cart-close" class="modal-close" aria-label="Close cart">âœ•</button>
            </div>
            <div class="modal-body">
                <!-- Cart items will be loaded dynamically -->
            </div>
        </aside>
    </div>

    <!-- Scripts -->
    <script src="js/cart.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Check if cart is empty, redirect to shop
        if (cart.getItemCount() === 0) {
            window.location.href = 'shop.html';
        }

        // Handle form submission
        document.getElementById('checkout-form').addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const customerData = Object.fromEntries(formData);

            // Show loading state
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Processing Order...';
            submitBtn.disabled = true;

            try {
                // Option 1: Submit to Google Sheets via Apps Script
                // Replace this URL with your Google Apps Script Web App URL
                const googleSheetsEndpoint = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';

                // Option 2: Submit to Formspree or similar service
                const formspreeEndpoint = 'https://formsubmit.co/your-email@example.com';

                // For demonstration, we'll use localStorage and redirect
                // In production, uncomment one of the endpoints above

                /*
                // Google Sheets Example:
                const orderDetails = {
                  orderId: cart.generateOrderId(),
                  customer: customerData,
                  items: cart.getItems(),
                  subtotal: cart.getSubtotal(),
                  shipping: cart.getShipping(),
                  total: cart.getTotal(),
                  timestamp: new Date().toISOString()
                };
                
                await fetch(googleSheetsEndpoint, {
                  method: 'POST',
                  mode: 'no-cors',
                  headers: {
                    'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(orderDetails)
                });
                */

                // Submit order (this will clear cart and redirect)
                await cart.submitOrder(customerData, null);

            } catch (error) {
                console.error('Order submission error:', error);
                showNotification('There was an error processing your order. Please try again.', 'error');

                // Restore button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    </script>
</body>

</html>